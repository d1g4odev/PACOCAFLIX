<!-- Header com informações do usuário -->
<div class="user-header">
  <div class="user-info">
    <span class="welcome-text">Seus Filmes Favoritos</span>
  </div>
  <button class="back-btn" (click)="router.navigate(['/home'])">
    ← Voltar para Home
  </button>
</div>

<!-- Botão Home no canto superior esquerdo -->
<div class="home-button-container">
    <button class="home-btn" (click)="goToHome()">
        <span class="home-icon">🏠</span>
        <span class="home-text">HOME</span>
    </button>
</div>

<div class="favorites-container">
  <h1 class="page-title">Meus Favoritos</h1>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Carregando seus filmes favoritos...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p>{{ error }}</p>
    <button (click)="loadFavorites()" class="retry-btn">Tentar Novamente</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && favoriteMovies.length === 0" class="empty-state">
    <div class="empty-icon">💔</div>
    <h2>Nenhum filme favorito ainda</h2>
    <p>Explore filmes e adicione aos seus favoritos!</p>
    <button (click)="goToHome()" class="explore-btn">Explorar Filmes</button>
  </div>

  <!-- Favorites Grid -->
  <div *ngIf="!loading && !error && favoriteMovies.length > 0" class="favorites-content">
    <div class="favorites-count">
      <span class="count-badge">{{ favoriteMovies.length }} filme{{ favoriteMovies.length !== 1 ? 's' : '' }} favorito{{ favoriteMovies.length !== 1 ? 's' : '' }}</span>
    </div>

    <div class="favorites-grid">
      <div *ngFor="let movie of favoriteMovies" class="favorite-card">
        <!-- Poster do filme -->
        <div class="movie-poster">
          <img [src]="getImageUrl(movie.poster_path)" [alt]="movie.title" (click)="gotoDetails(movie.id)">
          <div class="poster-overlay">
            <button class="details-btn" (click)="gotoDetails(movie.id)">
              📖 Detalhes
            </button>
          </div>
        </div>

        <!-- Informações do filme -->
        <div class="movie-info">
          <h3 class="movie-title" (click)="gotoDetails(movie.id)">
            {{ movie.title }}
          </h3>
          
          <div class="movie-meta">
            <span class="movie-year">
              {{ getYear(movie.release_date) }}
            </span>
            <span class="movie-genre">
              {{ movie.genres?.[0]?.name || 'Gênero' }}
            </span>
          </div>

          <p class="movie-overview" *ngIf="movie.overview">
            {{ movie.overview | slice:0:120 }}{{ movie.overview.length > 120 ? '...' : '' }}
          </p>

          <!-- Ações -->
          <div class="movie-actions">
            <button 
              class="remove-btn"
              (click)="removeFavorite(movie)"
              title="Remover dos favoritos">
              💔 Remover dos Favoritos
            </button>
            
            <button 
              class="details-btn-alt"
              (click)="gotoDetails(movie.id)"
              title="Ver detalhes">
              📖 Detalhes
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 