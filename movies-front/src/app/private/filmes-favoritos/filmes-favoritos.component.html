<!-- Bot√£o Home -->
<nav class="home-button-container">
    <button class="home-btn" (click)="goToHome()" aria-label="Voltar para a p√°gina inicial">
        <span class="home-icon">üè†</span>
        <span class="home-text">HOME</span>
    </button>
</nav>

<main class="filmes-favoritos-container" role="main" aria-label="Meus Filmes Favoritos">
    <header class="page-header">
        <h1>
            <span class="heart-icon">‚ù§Ô∏è</span>
            Meus Filmes Favoritos
        </h1>
        <p class="subtitle">Sua cole√ß√£o pessoal de filmes</p>
    </header>

    <section class="favorites-content" aria-live="polite">
        <!-- Loading -->
        <div *ngIf="isLoading" class="loading-container" role="status" aria-label="Carregando filmes favoritos">
            <div class="loading-spinner"></div>
            <p>Carregando seus filmes favoritos...</p>
        </div>

        <!-- Erro -->
        <div *ngIf="error && !isLoading" class="error-container" role="alert">
            <div class="error-icon">‚ö†Ô∏è</div>
            <h2>Ops! Algo deu errado</h2>
            <p>{{ error }}</p>
            <button class="retry-button" (click)="loadFavorites()">
                <span class="btn-icon">üîÑ</span>
                Tentar Novamente
            </button>
        </div>

        <!-- Sem favoritos -->
        <div *ngIf="!isLoading && !error && favoriteMovies.length === 0" class="no-favorites" role="alert">
            <div class="empty-icon">üíî</div>
            <h2>Nenhum filme favoritado ainda</h2>
            <p>Que tal come√ßar explorando alguns filmes incr√≠veis?</p>
            <button class="cta-button" (click)="goToHome()" aria-label="Ir para p√°gina inicial para descobrir filmes">
                <span class="btn-icon">üé¨</span>
                Descobrir Filmes
            </button>
        </div>

        <!-- Lista de favoritos -->
        <div *ngIf="!isLoading && !error && favoriteMovies.length > 0" class="favorites-grid" role="list">
            <article 
                *ngFor="let movie of favoriteMovies; trackBy: trackByMovieId" 
                class="movie-card" 
                role="listitem"
                [attr.aria-label]="'Filme: ' + (movie.title || 'T√≠tulo n√£o dispon√≠vel')"
            >
                <!-- Bot√£o de remo√ß√£o fixo -->
                <button 
                    class="remove-favorite-btn"
                    (click)="removeFavorite(movie, $event)"
                    [attr.aria-label]="'Remover ' + (movie.title || 'filme') + ' dos favoritos'"
                    title="Remover dos Favoritos"
                >
                    <span class="remove-icon">‚úï</span>
                </button>

                <!-- Poster do filme -->
                <div class="movie-poster" (click)="openMovieDetails(movie.id)">
                    <img 
                        [src]="getMoviePosterUrl(movie)" 
                        [alt]="'Poster do filme ' + (movie.title || 'T√≠tulo n√£o dispon√≠vel')"
                        class="poster-img"
                        loading="lazy"
                        (error)="onImageError($event)"
                    />

                    <!-- Badge de rating no poster -->
                    <div class="rating-badge">
                        <div class="stars-inline-favoritos">
                            <ng-container *ngFor="let star of getStarsArray(movie); let i = index">
                                <span 
                                    class="star-inline-favoritos"
                                    [class.filled]="star"
                                    [attr.aria-hidden]="true"
                                >‚òÖ</span>
                            </ng-container>
                            <span class="rating-value-favoritos">{{ getDisplayRating(movie) }}</span>
                        </div>
                    </div>

                    <!-- Overlay com a√ß√µes -->
                    <div class="movie-overlay">
                        <div class="overlay-content">
                            <button 
                                class="action-btn primary-btn"
                                (click)="openMovieDetails(movie.id); $event.stopPropagation()"
                                [attr.aria-label]="'Ver detalhes de ' + (movie.title || 'filme')"
                            >
                                <span class="btn-icon">üëÅÔ∏è</span>
                                Ver Detalhes
                            </button>
                            <button 
                                class="action-btn danger-btn"
                                (click)="removeFavorite(movie, $event)"
                                [attr.aria-label]="'Remover ' + (movie.title || 'filme') + ' dos favoritos'"
                            >
                                <span class="btn-icon">üóëÔ∏è</span>
                                Remover
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Informa√ß√µes do filme -->
                <div class="movie-info">
                    <h3 
                        class="movie-title" 
                        (click)="openMovieDetails(movie.id)"
                        [attr.aria-label]="'T√≠tulo: ' + (movie.title || 'T√≠tulo n√£o dispon√≠vel')"
                    >
                        {{ movie.title || 'T√≠tulo n√£o dispon√≠vel' }}
                    </h3>

                    <div class="movie-meta">
                        <span class="movie-year" *ngIf="movie.release_date">
                            {{ getMovieYear(movie.release_date) }}
                        </span>
                        <span class="movie-genre" *ngIf="movie.genres && movie.genres[0]">
                            {{ movie.genres[0].name }}
                        </span>
                    </div>

                    <!-- Rating detalhado -->
                    <div class="movie-rating-info">
                        <div class="stars-inline-favoritos" [attr.aria-label]="'Avalia√ß√£o: ' + getDisplayRating(movie) + ' de 5 estrelas'">
                            <ng-container *ngFor="let star of getStarsArray(movie); let i = index">
                                <span 
                                    class="star-inline-favoritos"
                                    [class.filled]="star"
                                    [attr.aria-hidden]="true"
                                >‚òÖ</span>
                            </ng-container>
                            <span class="rating-value-favoritos">{{ getDisplayRating(movie) }}</span>
                        </div>
                    </div>

                    <!-- A√ß√µes na parte inferior -->
                    <div class="movie-actions-bottom">
                        <button 
                            class="icon-btn details-btn"
                            (click)="openMovieDetails(movie.id)"
                            [attr.aria-label]="'Ver detalhes de ' + (movie.title || 'filme')"
                        >
                            üìÑ Detalhes
                        </button>
                        <button 
                            class="icon-btn remove-btn"
                            (click)="removeFavorite(movie, $event)"
                            [attr.aria-label]="'Remover ' + (movie.title || 'filme') + ' dos favoritos'"
                        >
                            üóëÔ∏è Remover
                        </button>
                    </div>
                </div>
            </article>
        </div>
    </section>
</main> 